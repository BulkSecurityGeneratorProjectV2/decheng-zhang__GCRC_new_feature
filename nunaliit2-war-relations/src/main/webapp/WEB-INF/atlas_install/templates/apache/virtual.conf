# This is an example of a configuration fragment that
# can be added to the Apache configuration to redirect
# appropriately to the atlas.

<VirtualHost *:80>
    ServerAdmin admin@wikiatlas.org
    ServerName @APACHE_URL_DOMAIN@

    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    ErrorLog /var/log/apache2/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined

    ProxyRequests Off

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    ProxyPass /geoserver/ @GEOSERVER_URL@@GEOSERVER_PATH_SEPARATORS@
    ProxyPassReverse /geoserver/ @GEOSERVER_URL@@GEOSERVER_PATH_SEPARATORS@

    Alias @APACHE_PATH_SEPARATORS@media/ "@UPLOAD_REPOSITORY_DIR@/"
    <Directory "@UPLOAD_REPOSITORY_DIR@">
        Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
    </Directory>

    ProxyPass @APACHE_PATH_SEPARATORS@media/ !
    ProxyPassReverse @APACHE_PATH_SEPARATORS@media/ !
    ProxyPass @APACHE_PATH_SEPARATORS@ @SERVLET_URL@@SERVLET_PATH_SEPARATORS@
    ProxyPassReverse @APACHE_PATH_SEPARATORS@ @SERVLET_URL@@SERVLET_PATH_SEPARATORS@

</VirtualHost>
    